// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Company {
  id              Int      @id @default(autoincrement())
  name            String
  city            String
  state           String
  phone           String?
  website         String?
  tier            String   @default("Basic")
  coverageRadius  Int?
  latitude        Float?
  longitude       Float?
  unionAffiliated Boolean  @default(false)
  specialties     String?  // comma separated
  email           String?
  address         String?

  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  images          CompanyImage[]

  @@map("companies")
}

model CompanyImage {
  id        Int      @id @default(autoincrement())
  companyId Int
  imageUrl  String

  createdAt DateTime @default(now())

  Company   Company  @relation(fields: [companyId], references: [id], onDelete: Cascade)

  @@map("company_images")
}

model DisposalFacility {
  id                Int      @id @default(autoincrement())
  name              String
  address           String?
  city              String?
  state             String?
  phone             String?
  hours             String?
  latitude          Float?
  longitude         Float?
  materialsAccepted String?  // comma separated

  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@map("disposal_facilities")
}

model DisposalSlideshow {
  id        Int      @id @default(autoincrement())
  state     String
  imageUrl  String

  createdAt DateTime @default(now())

  @@map("disposal_slideshows")
}

model StateLandingPage {
  id          Int                   @id @default(autoincrement())
  state       String                @unique
  header      String?
  description String?
  logoUrl     String?

  createdAt   DateTime              @default(now())
  updatedAt   DateTime              @updatedAt

  images      StateLandingImage[]

  @@map("state_landing_pages")
}

model StateLandingImage {
  id        Int               @id @default(autoincrement())
  pageId    Int
  imageUrl  String

  createdAt DateTime          @default(now())

  Page      StateLandingPage  @relation(fields: [pageId], references: [id], onDelete: Cascade)

  @@map("state_landing_images")
}

model PricingTier {
  id        Int      @id @default(autoincrement())
  name      String
  monthly   Float
  annual    Float
  sortOrder Int

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("pricing_tiers")
}

model HomepageContent {
  id               Int      @id @default(autoincrement())
  heroTitle        String?
  heroSubtitle     String?
  mainImage        String?   // Big hero image
  slideshowEnabled Boolean   @default(false)

  createdAt        DateTime  @default(now())
  updatedAt        DateTime  @updatedAt

  @@map("homepage_content")
}

model HomepageSlideshowImage {
  id        Int      @id @default(autoincrement())
  imageUrl  String

  createdAt DateTime @default(now())

  @@map("homepage_slideshow_images")
}
